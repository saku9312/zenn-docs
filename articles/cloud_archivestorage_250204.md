---
title: "クラウドサービスにおけるアーカイブストレージの検討"
emoji: "🎉"
type: "tech" # tech: 技術記事 / idea: アイデア
topics: []
published: true
---
## はじめに
ファイルサーバーのBCP対策としてパブリッククラウドのアーカイブストレージを検討。
主だった製品をまとめておく。

## AWS→S3 Gracierシリーズ
AWSはS3の中からアーカイブストレージとして2種類。
このストレージクラスは、使用頻度の少ないファイルを長期的に保存する際に有効。
Gracierは、以下の3つに分岐する。月一度でやりとりがある際などに使う。
>最小保存期間を下回る場合は、最小期間分が最低でも請求されるので注意。


### ・S3 Glacier Instant Retrival
最もスタンダードなS3に近い。即時アクセスが可能。
最小サイズが128KB。
最小保存期間は90日。
基本料金は1GBあたり0.004$/月（米国バージニア北部）。
ex.)医療データ、分析データ、メディアファイル
### ・S3 Glacier Flexible Retrival
デフォルトで3～5時間で取り出し可能、オプションで1～5分、大容量ファイルで5～12時間。
早く取り出したければ追加料金の支払いで可能。年に数回程度とかによさそう。
最小サイズが40KB。
最小保存期間は90日。
基本料金は1GBあたり0.0036$/月（米国バージニア北部）。
ex.)メディアアーカイブ、バックアップデータ、コンプラ用のデータ保存
### ・S3 Glacier Deep Archive
最も低コストだが、最も取り出しに時間がかかる（標準12時間）。大容量では48時間。
最小サイズが40KB。
最小保存期間は180日。
基本料金は1GBあたり0.00099$/月（米国バージニア北部）。
ex.)法規制に基づくデータ保存、歴史的なアーカイブ、ほぼ使わないバックアップ

## Google Cloud→Standard Storage以外
### ・Nearline Storage
月1回程度のアクセスが見込まれる場合。定期的だが頻繁ではないアクセスで使う。
1GBあたり0.010$/月（アイオワ）。
最小保存期間は30日。

### ・Coldline Storage
年数回のアクセスの場合。長期保存で使用可能。
1GBあたり0.004$/月（アイオワ）。
最小保存期間は90日。
ex.)復旧用バックアップ、法的要件などのアーカイブ

### ・Archive Storage
非常にアクセス頻度が低く、コスト効率の良いストレージクラス。
1GBあたり0.0012$/月（アイオワ）。
最小保存期間は365日。
ex.)数年に一度レベルのアーカイブ、企業の保管義務用アーカイブ

Google CloudはクラスAオペレーション、クラスBオペレーション、無料のオペレーションに分かれていて、1000オペレーション単位で請求が発生する。

## Azure→Azure Blob Storageのクールアクセス層以下
### ・Azure Blob Storage
Azureのオブジェクトストレージサービス。テキストデータや画像データなどの非構造化データを保存
するために最適化されている。
4つのアクセス層があり、データの使用頻度に応じてユーザーがアクセス層を選択できる。
    ・ホットアクセス層
    ・クールアクセス層
    ・コールドアクセス層
    ・アーカイブアクセス層
費用計算としては、最初の50TB/月、500TB以内/月、500TB以上/月で変化してくる。
現状50TBを超えることが考えにくいので、ストレージコストは50TBで計算。

### ・ホットアクセス層
データへのアクセスや変更が頻繁に行われる場合に選択。
ストレージコストは最も高額だが、アクセスコストは最も安価。
最初の50TBは、月に0.02$/GB。

### ・クールアクセス層
データのアクセスや変更の頻度が低いデータの保存に最適。
ホットアクセス層に比べるとストレージコストは安く、アクセスコストは高い。
最低保存期間は90日。
最初の50TBは、月に0.011$/GB。

### ・コールドアクセス層
クールアクセス層とおおよそ同じ。
最低保存期間は90日。
最初の50TBは、月に0.0045$/GB。

### ・アーカイブアクセス層
データへのアクセスがほとんど行われないデータの保存に最適。
ストレージコストは最も安価だが、データ取得にかかるコストが高く、取得までの時間も長くなる。
最低保存期間は180日。
最初の50TBは、月に0.002$/GB。
